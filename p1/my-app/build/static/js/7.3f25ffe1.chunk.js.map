{"version":3,"sources":["utils/validate/validator.js","components/common/FormsControls/FormsControls.js","components/common/FormsControls/FormsControls.module.css","components/Login/Login.module.css","components/Login/Login.jsx"],"names":["required","value","length","maxLenCreator","maxLen","minLenCreator","minLen","FormControl","input","meta","touched","error","elType","props","hasError","className","styles","formControls","React","createElement","Textarea","Input","Hidden","type","createMyField","placeholder","component","name","validators","text","validate","module","exports","Login","LoginReduxForm","onSubmit","email","pass","rememberMe","auth","isAuth","to","login","LoginReduxForm2","email2","pass2","rememberMe2","maxLen50","minLen2","reduxForm","form","handleSubmit","setCaptchaAnswer","onChange","e","target","style","noError","captchaDiv","capthaImg","noCaptcha","alt","src","checked","compose","connect","initialValues","checkAuthorization"],"mappings":"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","file":"static/js/7.3f25ffe1.chunk.js","sourcesContent":["export const required = value => {\n    if(value && value.length > 0) {\n        //console.log(value.length)\n        return undefined;\n    }\n    return 'required field';\n}\n\n\n\nexport const maxLenCreator = (maxLen) => (value) => {\n    if(value.length <= maxLen) return undefined;\n    return `max length ${maxLen} symbols`;\n}\n\nexport const minLenCreator = (minLen) => value => {\n    if(value.length >= minLen) return undefined;\n    return `min length ${minLen} symbols`;\n}\n\nexport const onlyNumbers = () => value => {\n    if(value.match(/[0-9]/)) return undefined;\n    return `i accept only numbers `;\n}\n\n","import React from 'react';\nimport styles from './FormsControls.module.css'\nimport {Field} from \"redux-form\";\nimport {required} from \"../../../utils/validate/validator\";\n\nconst FormControl = ({input, meta: {touched,error}, elType, ...props}) => {\n    let hasError = touched && error;\n    // console.log(props)\n    return (\n        <div className={styles.formControls + \" \" + (hasError && styles.error)}>\n\n            <div>\n                {React.createElement(elType, {/*type:'file', */...input, ...props})}\n            </div>\n            {hasError && <span> {error}</span>}\n        </div>\n    )\n}\n\n/*\n\nReact.createElement(\n    \"input\", {\n        className: \"rating-input\", type: \"radio\", name: \"rate\", value: \"1\", ref: \"rating\", onChange: this.handleChange\n    }\n),\n*/\n\n\nexport const Textarea = (props) => { // деструктуризація, REST-оператор\n    return <FormControl {...props} elType='textarea' />\n}\nexport const Radio = (props) => { // деструктуризація, REST-оператор\n    return <FormControl {...props} elType='input' type='radio'/>\n}\n/*\nexport const Textarea = (props) => { // деструктуризація, REST-оператор\n    const {input, meta, ...restProps} = props;\n    return <FormControl {...props}>\n        <textarea {...input} {...restProps}/>\n    </FormControl>\n}*/\n/*\nexport const Input = (props) => { // деструктуризація, REST-оператор\n    const {input, meta, ...restProps} = props;\n    return <FormControl {...props}>\n        <input {...input} {...restProps}/>\n    </FormControl>\n}*/\n\nexport const Input = (props) => { // деструктуризація, REST-оператор\n    //const {input, meta, ...restProps} = props;\n    return <FormControl {...props} elType='input'/>\n}\nexport const Hidden = (props) => { // деструктуризація, REST-оператор\n    //const {input, meta, ...restProps} = props;\n    return <FormControl {...props} elType='input' type='hidden' />\n}\nexport const FileUpload = (props) => { // деструктуризація, REST-оператор\n    //const {input, meta, ...restProps} = props;\n    return <FormControl {...props} elType='input' type='file'/>\n}\n\n\nexport const createMyField = (placeholder,component,name,validators, props = {}, text = '') =>\n    (\n        <div>\n            <Field\n                placeholder={placeholder}\n                component={component}\n                name={name}\n                validate={validators}\n                {...props}\n            /> {text}\n        </div>\n    )\n\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"formControls\":\"FormsControls_formControls__MCv0m\",\"error\":\"FormsControls_error__9lcue\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"captchaDiv\":\"Login_captchaDiv__36ONs\",\"noCaptcha\":\"Login_noCaptcha__nLUEK\",\"error\":\"Login_error__17Wu6\",\"noError\":\"Login_noError__3IZw_\"};","import React from \"react\";\nimport { reduxForm} from \"redux-form\";\nimport {connect} from \"react-redux\";\nimport {login, checkAuthorization, setCaptchaAnswer} from \"../../redux/auth_reducer\";\nimport {Redirect} from \"react-router-dom\";\nimport {compose} from \"redux\";\nimport {createMyField, Hidden, Input} from \"../common/FormsControls/FormsControls\";\nimport {maxLenCreator, minLenCreator, required} from \"../../utils/validate/validator\";\nimport style from \"./Login.module.css\"\n\nconst LoginContainer = (props) => {\n\n    // useEffect(() => {\n    //     let p = this.props;\n    //     let s = this.state;\n    // },[])\n\n\n    return <Login {...props}/>\n}\n\n// class LoginContainer extends React.Component { // зробив для тесту, можна і без цього класу\n//\n//     componentDidUpdate(prevProps, prevState, snapshot) {\n//         let p = this.props;\n//         let s = this.state;\n//         //debugger\n//         // todo не працює при лог-ауті на сайті\n//     }\n//\n//     render() {\n//         return <Login {...this.props}/>\n//     }\n// }\n\nconst Login = (props) => {\n\n    // let {tempCaptcha,setTempCaptcha} = useState('');\n\n    const onSubmit = ({email,pass,rememberMe}) => { //formData\n        //\n        if (props.auth.isAuth === false) {\n            props.login(email, pass, rememberMe)\n        } else {\n            return <Redirect to={'/index'}/>\n        }\n        // console.log(formData)\n    }\n    const onSubmit2 = ({email2,pass2,rememberMe2}) => { //formData\n        //\n        // console.log('email = ' + email2)\n        if (props.auth.isAuth === false) {\n            props.login(email2, pass2, rememberMe2)\n        } else {\n            return <Redirect to={'/index'}/>\n        }\n        // console.log(formData)\n    }\n    return <div>\n        <h1>Авторизація</h1>\n        <LoginReduxForm onSubmit={onSubmit} {...props} /><br/>\n        <LoginReduxForm2 onSubmit={onSubmit2} {...props} />\n    </div>\n}\nconst maxLen50 = maxLenCreator(50);\nconst minLen2 = minLenCreator(2);\n// const numOnly = onlyNumbers();\n\n// main login_form\nconst LoginForm = ({auth, handleSubmit, error,setCaptchaAnswer}) => {\n\n    // remember captcha in State for both accounts (to they both could use it while authorizing)\n    const formChanged = (e) => {\n        if(e.target.name === 'captcha'){\n            setCaptchaAnswer(e.target.value)\n        }\n    }\n\n    if (auth.isAuth === false) {\n\n        return <form onSubmit={handleSubmit} onChange={formChanged} >\n\n            <div className={(!error ? style.noError : '') + ' ' + style.error}>\n                {error}\n            </div>\n            {createMyField('email', Input, 'email', [required, maxLen50, minLen2],{value: 'test'})}\n            {createMyField('pass', Input, 'pass', [required, maxLen50, minLen2], {type: 'password'})}\n\n\n            <div className={style.captchaDiv + ' ' + (!auth.capthaImg ? style.noCaptcha : '')}>\n                <div>\n                    <img alt='captcha' src={auth.capthaImg ? auth.capthaImg : ''}/>\n                </div>\n                {createMyField('enter captcha', Input, 'captcha', (!auth.capthaImg ? [] : [required, maxLen50, minLen2]))}\n            </div>\n\n            {createMyField(null, Input, 'rememberMe', [], {type: 'checkbox',checked: 'checked'}, \"Remember me\")}\n            <div>\n                <button>Log in</button>\n            </div>\n        </form>\n    } else {\n        return <Redirect to={'/index'}/>\n    }\n\n\n}\n\n// secondary login form for TESTing\nconst LoginForm2 = ({auth, handleSubmit, error}) => {\n\n    if (auth.isAuth === false) {\n\n        return <form onSubmit={handleSubmit}>\n\n            <div className={(!error ? style.noError : '') + ' ' + style.error}>\n                {error}\n            </div>\n            {createMyField(null, Hidden, 'email2', [])}\n            {createMyField(null, Hidden, 'pass2', [])}\n\n            {/*  NO CAPTCHA NEEDED */}\n            {/*<div className={style.captchaDiv + ' ' + (!auth.capthaImg ? style.noCaptcha : '')}>*/}\n            {/*    <div>*/}\n            {/*        <img alt='captcha' src={auth.capthaImg ? auth.capthaImg : ''}/>*/}\n            {/*    </div>*/}\n            {/*    {createMyField('enter captcha', Input, 'captcha2', (!auth.capthaImg ? [] : [required, maxLen50, minLen2]))}*/}\n            {/*</div>*/}\n\n            {createMyField(null, Hidden, 'rememberMe2', [])}\n            <div>\n                <button>Log in for test</button>\n            </div>\n        </form>\n    } else {\n        return <Redirect to={'/index'}/>\n    }\n\n\n}\n\nconst LoginReduxForm = reduxForm({\n    form: 'auth'\n})(LoginForm)\nconst LoginReduxForm2 = reduxForm({\n    form: 'auth2'\n})(LoginForm2)\n\n\nconst mapStateToProps = ({auth}) => {\n    //debugger\n    return {\n        auth: auth,\n        initialValues: {\n            email2: 'wovo4ka2010@gmail.com',\n            pass2: '3AtGqkmDkKfmX6J',\n            // email2: 'free@samuraijs.com',\n            // pass2: 'free',\n            rememberMe2: true,\n\n        },\n\n        //capthaImg: props.capthaImg\n    }\n};\n\nexport default compose(\n    connect(mapStateToProps, {login, checkAuthorization,setCaptchaAnswer}),\n)(LoginContainer)\n\n//\n// export default () => {\n//     return <>\n//         <a href={`https://social-network.samuraijs.com/login`} target={`_blank`}>Потрібна авторизація</a>\n//     </>\n// }"],"sourceRoot":""}